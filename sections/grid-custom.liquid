{% schema %}
{
  "name": "Product Grid Custom",
  "settings": [
    { "type": "product", "id": "product1", "label": "Grid Product 1" },
    { "type": "product", "id": "product2", "label": "Grid Product 2" },
    { "type": "product", "id": "product3", "label": "Grid Product 3" },
    { "type": "product", "id": "product4", "label": "Grid Product 4" },
    { "type": "product", "id": "product5", "label": "Grid Product 5" },
    { "type": "product", "id": "product6", "label": "Grid Product 6" }
  ]
}
{% endschema %}

<section class="custom-product-grid">
  <h2 class="grid-title">Tisso vison in the wild</h2>
  <div class="grid">
    {% assign product_ids = section.settings.product1 | append: ',' | append: section.settings.product2 | append: ',' | append: section.settings.product3 | append: ',' | append: section.settings.product4 | append: ',' | append: section.settings.product5 | append: ',' | append: section.settings.product6 | split: ',' %}
    {% for id in product_ids %}
      {% assign prod = all_products[id] %}
      {% if prod %}
        <div class="grid-item">
          <div class="grid-item-imgwrap">
            <img src="{{ prod.featured_media | img_url: '600x' }}" alt="{{ prod.title | escape }}" />
            <button class="grid-plus-btn" 
              data-product="{{ prod | json | escape }}">
              +
            </button>
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>

  <!-- Modal -->
  <div class="modal" id="product-modal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true">
      <button class="modal-close-btn" id="close-modal">&times;</button>
      <div id="modal-image"></div>
      <div id="modal-title"></div>
      <div id="modal-price"></div>
      <div id="modal-desc"></div>
      <form id="modal-variant-form"></form>
      <button class="add-to-cart-btn banner-anim-btn" id="add-to-cart-btn" type="button">ADD TO CART â†’</button>
    </div>
  </div>
</section>

<script src="{{ 'grid-modal.js' | asset_url }}" defer></script>
